# 1st argument is the name of the VM
# 2nd argument path to the iso

VBoxManage createvm --name $1 --ostype "Windows7_64" --register

# Create a virtual hard drive, a virtual disk controller and attach the vhd to the virtual controller
VBoxManage createhd --filename myhdd.vdi --size 10000
VBoxManage storagectl $1 --name "IDE Controller" --add ide # --controller IntelAHCI
VBoxManage storageattach $1 --storagectl "IDE Controller" --port 0 --device 0 --type hdd --medium myhdd.vdi

# Virtual DVD attached to the VM (to install the iso)
#VBoxManage storagectl $1 --name "IDE Controller" --add ide

# Load the iso image in the virtual DVD drive
VBoxManage storageattach $1 --storagectl "IDE Controller" --port 1 --device 0 --type dvddrive --medium $2

# Change boot order to boot on the virtual DVD drive first
VBoxManage modifyvm $1 --boot1 disk --boot2 dvd

# set the RAM to 1GB
VBoxManage modifyvm $1 --memory 1024

# set the network interface to vboxnet0
VBoxManage modifyvm $1 --nic1 hostonly --hostonlyadapter1 vboxnet0

# set the shared folder
VBoxManage sharedfolder add $1 --name shares -automount --hostpath /media/luis/Data/UCL/LINGI2990\ -\ Memoire/shares

# VM is now ready to run:
VBoxManage startvm $1

